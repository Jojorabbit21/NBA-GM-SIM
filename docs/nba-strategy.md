# NBA 전술 & 경기 전문 지식 베이스

> 이 문서는 NBA-GM-SIM PBP 엔진 개발 및 전술 시스템 설계를 위한 참고 지식 베이스다.
> 실제 NBA 규칙·전술·경기 운영 방식을 정리하고, 각 개념이 엔진 파라미터와 어떻게 연결되는지 명시한다.

---

## 1. NBA 경기 기본 구조

### 게임 포맷
- **4쿼터 × 12분** = 총 48분 정규 경기
- 연장전: 5분씩 추가
- 쿼터 사이 인터미션: 2분 (하프타임 15분)
- **24초 샷클락**: 공격팀은 24초 내에 반드시 슛을 시도해야 함
- **8초 룰**: 백코트에서 프론트코트로 8초 내 넘어와야 함

### 포세션 구조 (PBP 엔진 핵심)
NBA 경기 한 경기당 평균 포세션 수:
- 팀당 약 95~105 포세션 (팀 페이스에 따라 다름)
- **페이스** = (팀 포세션 + 상대 포세션) / 2
- 엘리트 페이스 팀 (예: 밀워키 2023-24): 100+
- 슬로우 팀 (예: 마이애미 핏 스타일): 94~96

### 득점 구조 (리그 평균 기준)
| 유형 | 시도 비율 | 성공률 |
|------|----------|--------|
| 림 (0~3피트) | ~30% | ~65% |
| 페인트 (3~8피트) | ~8% | ~45% |
| 미드레인지 | ~15% | ~43% |
| 3점 | ~40% | ~36% |
| 자유투 | 별도 | ~78% |

> **엔진 연결**: `SIM_CONFIG.SHOOTING`의 `INSIDE_BASE_PCT`, `MID_BASE_PCT`, `THREE_BASE_PCT`가 이 수치를 기반으로 설계되어야 함.

---

## 2. 공격 전술 체계

### 2-1. 기본 공격 시스템

#### Pick and Roll (픽앤롤 / PnR)
현대 NBA에서 가장 많이 사용되는 공격 패턴.
- **볼 핸들러**: PG 또는 SG가 스크린을 이용해 공간 창출
- **스크리너(Roller)**: C 또는 PF가 스크린 후 림으로 컷 또는 팝아웃
- **키 어트리뷰트**: 핸들러의 `dribble`, `pass`, `shotIq` / 롤러의 `layup`, `dunk`, `postPlay`
- **디펜스 대응**: Drop, Hedge, Switch, ICE, Blitz
- **엔진 연결**: `PerimeterFocus` 전술의 핵심 메커니즘

| PnR 수비 커버리지 | 설명 | 취약점 |
|----------------|------|--------|
| **Drop** | 빅맨이 뒤로 처지며 수비 | 핸들러 미드레인지 오픈 |
| **Hedge** | 빅맨이 순간 앞으로 나와 막음 | 롤러가 공간 활용 가능 |
| **Switch** | 두 수비수가 서로 맞바꿈 | 미스매치 발생 가능 |
| **Blitz/Trap** | 두 명이 볼 핸들러 더블팀 | 킥아웃 3점 허용 |

#### Post-Up (포스트 업)
- 빅맨 또는 윙이 골대 근처 로우포스트에서 공을 잡아 1 대 1 공격
- **키 어트리뷰트**: `postPlay`, `strength`, `ins`, `footwork`
- **최적 포지션**: C, PF, 대형 SF
- **엔진 연결**: `PostFocus` 전술에서 빅맨 포세션 비중 상승

#### Isolation (아이소레이션 / ISO)
- 한 명의 공격수가 디펜더와 1 대 1 대결
- 보통 클러치 상황 또는 에이스 스코어러에게 사용
- **키 어트리뷰트**: `dribble`, `speed`, `offMove`, `ins`, `out`
- **단점**: 팀 포세션 낭비 위험, 다른 선수 비활성화
- **엔진 연결**: Ace 스코어러에 대한 추가 포세션 배분 로직

#### Motion Offense (모션 오펜스)
- 전원이 끊임없이 움직이며 공간을 창출하는 팀 오펜스
- 특정 스타 없이 패싱과 스크린으로 오픈 샷 창출
- **키 어트리뷰트**: `offMove`, `pass`, `shotIq`
- **현대 NBA 트렌드**: 5-Out (다섯 명 모두 3점라인 밖)과 결합

#### Transition Offense (트랜지션)
- 상대 실점 또는 턴오버 직후 빠르게 공격 전환
- 수비가 세팅되기 전 쉬운 득점 기회 창출
- **키 어트리뷰트**: `speed`, `stamina`, `layup`, `dunk`
- **엔진 연결**: `pace` 슬라이더가 높을수록 트랜지션 포세션 비중 증가

---

### 2-2. 현대 NBA 공격 트렌드 (Moreyball 시대)

**3점 혁명 (2010s~현재)**
- 기대 득점(Expected Value) 최적화: 3점(1.05~1.2 pts/shot) > 림(1.3 pts/shot) > 미드레인지(0.75~0.85 pts/shot)
- **죽은 구역**: 중거리 풀업 2점은 효율이 가장 낮은 샷
- **리그 평균 3PA 비중**: 2015년 ~28% → 2024년 ~40%
- **엔진 연결**: `shootingSystem.ts`의 `base3PTendency` 티어 설계가 이를 반영함

**Switch-Everything 오펜스**
- 상대가 Switch 수비를 쓸 경우 의도적으로 미스매치를 만들어 공격
- 포인트 포워드, 포인트 센터 활용
- 작은 수비수에게 빅맨이 포스트업, 큰 수비수에게 가드가 스피드 공격

---

### 2-3. 공격 전술 슬라이더 해석 (엔진 직결)

| 슬라이더 | 의미 | 높을 때 영향 | 낮을 때 영향 |
|---------|------|-----------|-----------|
| `pace` | 경기 템포 | 포세션 수 증가, 샷 퀄리티 감소 | 포세션 수 감소, 샷 퀄리티 증가 |
| `threePointRate` | 3점 시도 빈도 | 3PA 비중 증가 | 2점 위주 공격 |
| `postUpRate` | 포스트업 빈도 | 빅맨 포세션 증가 | 아웃사이드 위주 |
| `transitionRate` | 속공 빈도 | 드리블 전진 포세션 증가 | 세팅된 하프코트 위주 |
| `starUsage` | 에이스 포세션 집중도 | 핵심 선수 FGA 증가 | 팀 볼 분배 균등화 |

---

## 3. 수비 전술 체계

### 3-1. Man-to-Man Defense (매맨 / 대인 수비)

가장 기본적이고 리그에서 가장 많이 사용되는 수비 방식.

#### Coverage 유형
- **Pressure (풀 코트 / 하프 코트 프레스)**
  - 공격 시작 시점부터 볼 핸들러에 강한 압박
  - 턴오버 유발 목적, 체력 소모 큼
  - **어트리뷰트**: 수비수의 `speed`, `stamina`, `perDef`

- **Sag Off (세이그 / 드랍)**
  - 공격수가 3점을 못 쏘는 선수일 경우 거리를 두고 수비
  - 드라이브 경로 차단 목적, 킥아웃 3점에 취약

- **Deny (패스 차단)**
  - 볼을 받지 못하게 패싱 레인 차단
  - **적합 대상**: 에이스 스코어러, 포스트업 빅맨
  - **엔진 연결**: `AceStopper` 전술에서 구현

#### 헬프 디펜스 (Help Defense)
- 볼 방향으로 수비수들이 한 단계씩 이동해 수비 네트 형성
- **I-M-B-O-V 원칙**: 볼과 자신의 마크맨을 동시에 시야에 두기
- **킥업 로테이션**: 빅맨이 림 수비를 위해 돕고, 주변 수비수들이 로테이션
- **엔진 연결**: `helpDef` 슬라이더 → 림/페인트 히트율 감소 효과

---

### 3-2. Zone Defense (존 수비)

**2-3 Zone**
- 2명은 외곽, 3명은 페인트 지역 커버
- **장점**: 빅맨 보호, 드라이브 차단
- **약점**: 코너 3점 허용, 미드레인지 오픈
- **적합 상황**: 상대 팀에 3점 슈터가 적을 때

**3-2 Zone**
- 3명 외곽, 2명 내부
- **장점**: 외곽 3점 압박
- **약점**: 포스트업, 하이-로우 패싱에 취약

**1-3-1 Zone**
- 프레스 성격, 턴오버 유발 목적
- 극도로 공격적 성향, 지쳐서 뚫리면 치명적

> **현재 엔진 상태**: 존 수비 메커니즘이 별도로 구현되지 않음. `defIntensity` + `helpDef` 슬라이더로 간접 반영 중.

---

### 3-3. 수비 전술 슬라이더 해석 (엔진 직결)

| 슬라이더 | 의미 | 높을 때 효과 | 낮을 때 효과 |
|---------|------|-----------|-----------|
| `defIntensity` | 수비 압박 강도 | FG% 감소, 파울 증가 위험 | 오픈 샷 허용, 파울 감소 |
| `helpDef` | 헬프 디펜스 적극성 | 림/페인트 FG% 감소, 외곽 오픈 | 드라이브 허용 증가 |
| `paintProtection` | 페인트 수비 집중도 | 레이업/덩크 차단, 블록 증가 | 포스트업 허용 |
| `contestRate` | 3점 컨테스트 적극성 | 3P% 감소 | 오픈 3점 허용 |
| `doubleTeam` | 더블팀 빈도 | 에이스 억제, 킥아웃 허용 | 1 대 1 수비 유지 |

---

## 4. 선수 역할 & 포지션 이론

### 4-1. 포지션별 역할 정의

#### Point Guard (PG / 포인트 가드)
**핵심 역할**: 볼 핸들링, 오펜스 오케스트레이팅, 경기 템포 조절
- **1차 임무**: 팀원에게 좋은 공격 기회 만들어주기
- **키 어트리뷰트**: `pass`, `dribble`, `shotIq`, `vision`, `speed`
- **현대적 PG**: 드라이브 앤 킥, 픽앤롤 볼 핸들러, 3점 위협
- **유형**:
  - **Pass-First PG**: Harden(초기), CP3 스타일 — 어시스트 최우선
  - **Scorer PG**: Lillard, Trae Young 스타일 — 직접 득점 위주
  - **Two-Way PG**: Jrue Holiday 스타일 — 공수 균형

#### Shooting Guard (SG / 슈팅 가드)
**핵심 역할**: 득점, 오프볼 무브먼트, 3점 스팟업
- **키 어트리뷰트**: `out`, `three45`, `threeTop`, `offMove`, `speed`
- **현대적 SG**: 캐치앤슛 3점, 오프스크린 무브, 픽앤롤 세컨드 핸들러
- **유형**:
  - **3-and-D SG**: Klay(부상 전), 게리 페이튼 II — 스팟업 3점 + 수비
  - **Volume Scorer SG**: DeRozan(중기) — 미드레인지 전문가
  - **Do-It-All SG**: 현대 SG의 방향 — 볼 핸들링도 가능

#### Small Forward (SF / 스몰 포워드)
**핵심 역할**: 팀에서 가장 versatile한 포지션, 공수 양쪽 기여
- **키 어트리뷰트**: `ins`, `out`, `perDef`, `intDef`, `strength`, `speed`
- **현대적 SF**: 스위치 수비 가능, 3점 위협, 포스트업 가능
- **유형**:
  - **3-and-D SF**: Mikal Bridges, OG Anunoby — 수비 전문 + 3점
  - **Scorer SF**: Kawhi Leonard — 공수 에이스
  - **Playmaking SF**: LeBron James — 포인트 포워드 역할

#### Power Forward (PF / 파워 포워드)
**핵심 역할**: 현대 NBA에서 가장 다양한 역할 변화 겪은 포지션
- **키 어트리뷰트**: `strength`, `intDef`, `rebound`, `ins`, `out`
- **현대적 PF**: Stretch Big으로 진화
- **유형**:
  - **Traditional PF**: 포스트업, 리바운드 전문 (Barkley 스타일)
  - **Stretch PF**: 3점 위협 빅맨 (Giannis, AD의 현대적 해석)
  - **Switchable PF**: 1~4번 모두 수비 가능 (Draymond Green)

#### Center (C / 센터)
**핵심 역할**: 림 프로텍터, 리바운더, 픽앤롤 피니셔
- **키 어트리뷰트**: `intDef`, `block`, `rebound`, `dunk`, `layup`, `strength`
- **현대적 C**: 픽앤팝 또는 픽앤롤 양용 (롤링과 팝아웃 모두 가능)
- **유형**:
  - **Rim Protector**: 블록, 리바운드 집중 (Rudy Gobert)
  - **Scoring C**: 포스트업 + 페이드어웨이 (Joel Embiid)
  - **Stretch C**: 3점 위협 센터 (Brook Lopez)

---

### 4-2. 현대 NBA 선수 아키타입 (12개)

현재 `archetypeSystem.ts`에서 계산되는 12가지 아키타입과 NBA 맥락:

| 아키타입 | NBA 표현 | 핵심 역할 | 대표 선수 유형 |
|---------|---------|---------|-------------|
| **Handler** | 볼 핸들러 | 픽앤롤 운영, 팀 조율 | CP3, Luka |
| **Spacer** | 스팟업 슈터 | 3점 스팟업, 공간 창출 | Klay, 최근 Steph |
| **Driver** | 드라이브 스페셜리스트 | 드라이브 후 마무리/킥아웃 | Zach LaVine |
| **Roller** | 픽앤롤 롤러 | 스크린 후 림 피니시 | Clint Capela |
| **Post** | 포스트 스페셜리스트 | 로우포스트 1 대 1 | Embiid, DeMar |
| **Cutter** | 컷팅 스페셜리스트 | 오프볼 컷으로 득점 | Siakam(초기) |
| **Playmaker** | 패싱 퍼스트 | 어시스트 창출 | LeBron, Draymond |
| **Lockdown** | 수비 스페셜리스트 | 상대 에이스 억제 | Jrue, OG |
| **Stretch** | 스트레치 빅 | 3점 위협 빅맨 | Sabonis |
| **TwoWay** | 공수 양방향 | 공수 균형 | Kawhi, Jimmy |
| **Rim Protector** | 림 수호자 | 블록, 페인트 수비 | Gobert |
| **Scorer** | 순수 득점원 | 볼 있을 때 득점 | Harden(현재) |

---

## 5. 경기 운영 & 로테이션 이론

### 5-1. 분당 출전 관리 (Minutes Management)

#### 기본 원칙
- **에이스**: 32~36분 (부상 방지, 4쿼터 체력 보존)
- **로테이션 플레이어**: 20~28분
- **벤치 플레이어**: 10~18분
- **DNP (Did Not Play)**: 경기 상황에 따라 로테이션 컷

#### 쿼터별 출전 패턴
```
1Q: 주전 전원 + 스타터 10분
   → 1Q 후반: 1~2명 벤치 투입 (2~3분 쉬게 함)
2Q: 주전 일부 + 벤치 유닛 (1~2 주전 남김)
   → "벤치 유닛" 구간: 득점 차이 벌리거나 줄이는 시간
하프타임
3Q: 주전 복귀, 선수 컨디션 점검
4Q: 클로징 라인업 → 에이스 + 3-and-D 조합
   → 클러치 타임(5분 이내 5점 차이 이하): 베스트 5 고정
```

#### 현재 엔진 연결
- `RotationMatrix`: Boolean[48] → 분 단위로 출전 여부 결정
- `currentCondition`: 피로도 반영 어트리뷰트
- PBP 엔진이 현재 분(minute)을 기반으로 on-court 선수 결정

---

### 5-2. 클러치 타임 (Clutch Time)

**정의**: 4쿼터 또는 연장전, 5분 이하, 점수 차 5점 이하

#### 클러치 운영 원칙
1. **선수 기용**: 가장 믿을 수 있는 5명 (클러치 능력 기준)
2. **전술**: ISO 또는 PnR 위주 단순화 (실수 최소화)
3. **파울 관리**: 파울 많은 선수는 교체, 상대 볼 점유 시 파울 유도
4. **타임아웃 운영**: 흐름 끊기, 작전 지시, 상대 리듬 차단

#### 클러치 관련 어트리뷰트
- `clutch`: 클러치 상황 추가 퍼포먼스
- `offConsist`: 일관성 (높을수록 클러치에도 평소 실력 발휘)
- `shotIq`: 좋은 샷 선택 (클러치에서 무리한 샷 줄임)
- `mentalClutchBonus`: 엔진의 `PerfModifiers`에서 계산

---

### 5-3. 파울 관리 (Foul Management)

#### 개인 파울 한도
- 일반 파울: 6개 퇴장 (NBA 규정)
- **파울 트러블**: 3파울 이상이면 전반기에 벤치로 교체
- **4파울**: 4쿼터 전까지 보존 전략 (감독 판단)

#### 팀 파울
- 팀당 쿼터당 4개 초과시 → 상대팀 자동으로 자유투 (보너스)
- 5~6파울부터 "파울 어웨이" 전략 사용 가능 (경기 지연)

#### 게임 후반 파울 전략
- **지는 팀**: 고의 파울(Hack-a-Shaq) → 자유투 미스 유도, 빠른 공격권 회복
- **이기는 팀**: 파울 아끼기, 클린 수비 유지

---

### 5-4. 타임아웃 운영

| 상황 | 타임아웃 사용 이유 |
|------|----------------|
| 상대 런 발생 (6점 이상 연속 실점) | 흐름 차단, 선수 재정비 |
| 클러치 타임 작전 | 구체적 플레이 지시 |
| 피로한 주전 교체 기회 | 30초 휴식 |
| 상대 플레이어 자유투 전 | 자유투 슈터 압박 (icing) |
| 리드 보존 마지막 공격 | 시간 소모 작전 |

---

## 6. 선수 평가 이론 (Player Evaluation)

### 6-1. 전통 스탯 vs 현대 스탯

#### 전통 스탯 (Box Score)
| 스탯 | 설명 | 현재 엔진 지원 |
|-----|------|-------------|
| PTS | 득점 | ✅ |
| REB | 리바운드 (O+D) | ✅ |
| AST | 어시스트 | ✅ |
| STL | 스틸 | ✅ |
| BLK | 블록 | ✅ |
| TOV | 턴오버 | ✅ |
| FG% | 야투율 | ✅ (구역별) |
| 3P% | 3점슛 성공률 | ✅ |
| FT% | 자유투율 | ✅ |

#### 현대 고급 스탯
| 스탯 | 설명 | 현재 엔진 지원 |
|-----|------|-------------|
| TS% (True Shooting %) | 자유투 포함 실질 성공률 | ⚠️ 계산 가능 (UI 없음) |
| USG% (Usage Rate) | 팀 포세션 점유율 | ❌ 미구현 |
| ORtg / DRtg | 100포세션당 팀 득/실점 | ❌ 미구현 |
| PER | 선수 효율성 지수 | ❌ 미구현 |
| BPM | 박스 플러스 마이너스 | ❌ 미구현 |
| WS (Win Shares) | 승리 기여도 | ❌ 미구현 |

> **공식**:
> - `TS% = PTS / (2 × (FGA + 0.44 × FTA))`
> - `USG% = 100 × (FGA + 0.44×FTA + TOV) × (TeamMP/5) / (MP × (TeamFGA + 0.44×TeamFTA + TeamTOV))`

---

### 6-2. OVR (Overall Rating) 계산 원칙

#### 포지션별 가중치 설계 이유
- **PG**: 패스/드리블/샷IQ 중시 → 팀 운영 능력이 핵심
- **SG**: 아웃사이드 슈팅/스피드 중시 → 오프볼 득점원
- **SF**: 균형 분배 → 올라운더 특성
- **PF**: 수비/리바운드 + 현대 3점 위협
- **C**: 인사이드 수비/리바운드 절대 중시

#### OVR과 실제 퍼포먼스 관계
- OVR은 잠재력 지수이지, 실제 득점을 결정하지 않음
- 실제 득점은 미스매치, 전술, 역할, 로테이션 분에 따라 달라짐
- **예**: OVR 75 리저브가 OVR 90 스타보다 특정 경기에서 잘 할 수 있음 (미스매치, 역할 적합성)

---

## 7. 트레이드 & 로스터 구성 이론

### 7-1. 좋은 로스터 구성 원칙

#### 기본 원칙
1. **스타 보유**: 플레이오프 진출하려면 OVR 85+ 에이스 필요
2. **뎁스(Depth)**: 에이스 1명 + 세컨드 옵션(80+) + 유틸리티 플레이어들
3. **3-and-D 확보**: 3점 + 수비 가능한 선수 2~3명은 필수
4. **리바운드 전문가**: 2점 박스 지배 위해 센터/PF 역할 명확화
5. **공수 밸런스**: 극단적 공격력 팀은 수비 약점에 취약

#### 포지션 밸런스
- **Modern Lineup**: SF/PF 경계 사라짐 → 스위치 가능한 윙 선호
- **Space and Pace**: 5명 모두 3점 가능해야 이상적
- **Big Lineup**: 전통적 빅맨 중심, 현대에는 리바운드/페인트 장악 목적

### 7-2. 트레이드 평가 원칙

#### 선수 가치 평가 요소
1. **OVR**: 직관적 능력치 비교
2. **포지션 희소성**: PG 에이스가 C 에이스보다 영입 경쟁 치열
3. **나이**: 25세 이하는 성장 가능성 프리미엄
4. **역할 적합성**: 팀 전술에 맞는지 여부
5. **계약 상황**: (멀티플레이어 시 샐러리 캡 필요)

#### 공정한 트레이드 기준 (Rough Guide)
- OVR 90 에이스 ↔ OVR 85 + OVR 80 패키지
- OVR 85 ↔ OVR 80 + OVR 75
- **원칙**: 팀이 가진 필요 포지션과 잉여 포지션 교환

---

## 8. NBA 핵심 철학 요약 (PBP 엔진 설계 원칙)

### 현대 NBA의 핵심 원칙
1. **3점은 2점보다 효율적**: 성공률이 66.7% 이하라도 3점이 유리
2. **림은 항상 최고 효율**: 성공률 60% 이상이면 최우선
3. **미드레인지는 비효율**: 특출난 선수 제외하고는 최소화
4. **스위치 수비 파괴**: 미스매치를 만들어 ISO로 공격
5. **페이스가 높을수록 에러도 증가**: 빠른 팀은 턴오버도 많음

### 게임 시뮬레이션 적용 원칙
1. **분산이 있어야 리얼함**: 같은 능력치라도 매 경기 결과가 달라야 함
2. **스타는 클러치에서 빛남**: 상황별 퍼포먼스 차이 존재
3. **전술이 개인 능력을 이김**: 좋은 전술 + 평범한 선수 > 나쁜 전술 + 좋은 선수 (일정 범위에서)
4. **피로도는 후반으로 갈수록 영향**: 4쿼터 선수 컨디션이 승패 가름
5. **홈 어드밴티지는 실재함**: 리그 평균 홈팀 승률 ~58%

---

## 9. 용어 사전 (Glossary)

| 용어 | 풀이 |
|-----|------|
| **Pace** | 팀의 경기 템포 (포세션/48분) |
| **eFG%** | 3점 보정 야투율 `(FGM + 0.5×3PM) / FGA` |
| **TS%** | 자유투 포함 실질 성공률 |
| **PnR** | Pick and Roll — 스크린 앤 롤 |
| **ISO** | Isolation — 1 대 1 공격 |
| **3-and-D** | 3점 슈팅 + 수비 전문 플레이어 |
| **Floor Spacer** | 3점 위협으로 공간 만드는 선수 |
| **Rim Protector** | 림 앞 수비 전문 센터 |
| **Switchable** | 다수 포지션 수비 가능한 선수 |
| **Ball Movement** | 팀원 간 패스 흐름 |
| **Closeout** | 3점 슈터에게 빠르게 달려가 컨테스트 |
| **Help Rotation** | 헬프 후 순환 수비 |
| **Blitz** | 픽앤롤 볼 핸들러에게 더블팀 |
| **ICE** | 픽앤롤을 사이드라인 쪽으로 몰아 차단 |
| **Hedge** | 픽앤롤 시 빅맨이 앞으로 나와 순간 차단 |
| **Drop** | 픽앤롤 시 빅맨이 뒤로 처지며 수비 |
| **Transition** | 공격→수비 or 수비→공격 전환 |
| **Clutch** | 경기 후반 결정적 순간 |
| **DNP** | Did Not Play — 출전 없음 |
| **Garbage Time** | 압도적 점수 차로 교체 선수들 출전 |
| **Hack-a-Shaq** | 자유투가 약한 선수에게 의도적 파울 |
| **Box Score** | 개인/팀 스탯 요약표 |
| **PBP** | Play-by-Play — 포세션별 상세 기록 |
